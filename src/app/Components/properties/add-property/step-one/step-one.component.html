<app-message
  *ngIf="showMessagePopup"
  [image]="imageToShow"
  (popupClosed)="onPopupClosed()"
>
</app-message>
<form>
  <div class="upload-container">
    <label class="upload-label">Upload Photos</label>

    <div
      class="upload-box"
      (click)="fileInput.click()"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)"
      [class.dragging]="isDragging"
      role="button"
      tabindex="0"
      (keydown.enter)="fileInput.click()"
    >
      <div class="upload-content">
        <div class="upload-icon"></div>
        <p class="upload-text">Drag and drop files here</p>
        <span class="upload-or">Or</span>
        <button
          type="button"
          class="browse-btn"
          (click)="fileInput.click(); $event.stopPropagation()"
        >
          Browse Files
        </button>

        <!-- hidden real input -->
        <input
          #fileInput
          id="imageUpload"
          type="file"
          accept="image/*"
          multiple
          (change)="onFilesSelected($event)"
          style="display: none"
        />
      </div>
    </div>

    <!-- simple previews (optional) -->
    <div class="previews" *ngIf="previewImages.length">
      <div class="preview" *ngFor="let src of previewImages; let i = index">
        <img [src]="src" alt="preview {{ i }}" />
        <button type="button" class="remove" (click)="removeImage(i)">âœ•</button>
      </div>
    </div>
  </div>

  <div class="container">
    <section
      #scrollContainer
      class="slider-section"
      (mousedown)="startDrag($event)"
      (mouseup)="stopDrag()"
      (mouseleave)="stopDrag()"
      (mousemove)="onDrag($event)"
    >
      <div class="slide-track">
        <div class="slide">
          <img
            class="image-with-remove cursor-pointer"
            *ngFor="let url of previewImages; let i = index"
            [src]="url"
            alt="Property image"
            draggable="false"
            (click)="openPopup(url)"
            (contextmenu)="removeImage(i); $event.preventDefault()"
          />
        </div>
      </div>
    </section>
  </div>
</form>
